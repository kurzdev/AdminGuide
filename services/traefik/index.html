
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Linux Server Administrator Guide">
      
      
      
        <meta name="author" content="https://github.com/felbinger">
      
      
        <link rel="canonical" href="https://felbinger.github.io/AdminGuide/services/traefik/">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>Traefik - Admin Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/asciinema-player.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="green" data-md-color-accent="lime">
      
        <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#traefik" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://felbinger.github.io/AdminGuide/" title="Admin Guide" class="md-header-nav__button md-logo" aria-label="Admin Guide">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Admin Guide
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Traefik
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/felbinger/AdminGuide/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    felbinger/AdminGuide
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://felbinger.github.io/AdminGuide/" title="Admin Guide" class="md-nav__button md-logo" aria-label="Admin Guide">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Admin Guide
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/felbinger/AdminGuide/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    felbinger/AdminGuide
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../backup/" class="md-nav__link">
        Backup
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../snort/" class="md-nav__link">
        Snort 3 (NIDS)
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" data-md-state="indeterminate" type="checkbox" id="nav-4" checked>
      
      <label class="md-nav__link" for="nav-4">
        Installation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Installation" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        Base
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/dns/" class="md-nav__link">
        Configure DNS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/stack-logic/" class="md-nav__link">
        Stack Logic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/postinstall/" class="md-nav__link">
        Postinstall Script
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
      
      <label class="md-nav__link" for="nav-5">
        Services
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Services" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1" checked>
      
      <label class="md-nav__link" for="nav-5-1">
        Proxies
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Proxies" data-md-level="2">
        <label class="md-nav__title" for="nav-5-1">
          <span class="md-nav__icon md-icon"></span>
          Proxies
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Traefik
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Traefik
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wildcard-certificates" class="md-nav__link">
    Wildcard Certificates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-middlewares" class="md-nav__link">
    Authentication Middlewares
  </a>
  
    <nav class="md-nav" aria-label="Authentication Middlewares">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-auth" class="md-nav__link">
    Basic Auth
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirect-middleware" class="md-nav__link">
    Redirect Middleware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-metrics-for-monitoring" class="md-nav__link">
    Enable Metrics for Monitoring
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../nginx-proxy/" class="md-nav__link">
        nginx/proxy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../docky-onion/" class="md-nav__link">
        docky-onion
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-2" data-md-state="indeterminate" type="checkbox" id="nav-5-2" checked>
      
      <label class="md-nav__link" for="nav-5-2">
        Web Server
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Web Server" data-md-level="2">
        <label class="md-nav__title" for="nav-5-2">
          <span class="md-nav__icon md-icon"></span>
          Web Server
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../nginx/" class="md-nav__link">
        nginx
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../httpd/" class="md-nav__link">
        httpd
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../httpd-php/" class="md-nav__link">
        httpd with php
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-3" data-md-state="indeterminate" type="checkbox" id="nav-5-3" checked>
      
      <label class="md-nav__link" for="nav-5-3">
        Databases
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Databases" data-md-level="2">
        <label class="md-nav__title" for="nav-5-3">
          <span class="md-nav__icon md-icon"></span>
          Databases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../mariadb/" class="md-nav__link">
        MariaDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../mongodb/" class="md-nav__link">
        MongoDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../postgresql/" class="md-nav__link">
        PostgreSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../redis/" class="md-nav__link">
        Redis
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../openldap/" class="md-nav__link">
        OpenLDAP
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-4" data-md-state="indeterminate" type="checkbox" id="nav-5-4" checked>
      
      <label class="md-nav__link" for="nav-5-4">
        Gameserver
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Gameserver" data-md-level="2">
        <label class="md-nav__title" for="nav-5-4">
          <span class="md-nav__icon md-icon"></span>
          Gameserver
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../minecraft/" class="md-nav__link">
        Minecraft
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../arma3/" class="md-nav__link">
        Arma 3 Server
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-5" data-md-state="indeterminate" type="checkbox" id="nav-5-5" checked>
      
      <label class="md-nav__link" for="nav-5-5">
        Communication
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Communication" data-md-level="2">
        <label class="md-nav__title" for="nav-5-5">
          <span class="md-nav__icon md-icon"></span>
          Communication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../teamspeak/" class="md-nav__link">
        Teamspeak 3 + Sinusbot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../matrix/" class="md-nav__link">
        Matrix
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../element/" class="md-nav__link">
        Element
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../jitsi/" class="md-nav__link">
        Jitsi
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-6" data-md-state="indeterminate" type="checkbox" id="nav-5-6" checked>
      
      <label class="md-nav__link" for="nav-5-6">
        Storage
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Storage" data-md-level="2">
        <label class="md-nav__title" for="nav-5-6">
          <span class="md-nav__icon md-icon"></span>
          Storage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../syncthing/" class="md-nav__link">
        Syncthing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sharelatex/" class="md-nav__link">
        ShareLaTeX
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../hackmd/" class="md-nav__link">
        HackMD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../calibre/" class="md-nav__link">
        Calibre
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gitea/" class="md-nav__link">
        Gitea
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-7" data-md-state="indeterminate" type="checkbox" id="nav-5-7" checked>
      
      <label class="md-nav__link" for="nav-5-7">
        Monitoring
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Monitoring" data-md-level="2">
        <label class="md-nav__title" for="nav-5-7">
          <span class="md-nav__icon md-icon"></span>
          Monitoring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../grafana/" class="md-nav__link">
        Grafana
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../influxdb/" class="md-nav__link">
        InfluxDB + Telegraf
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../prometheus/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../loki/" class="md-nav__link">
        Loki (collect logs)
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wildcard-certificates" class="md-nav__link">
    Wildcard Certificates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-middlewares" class="md-nav__link">
    Authentication Middlewares
  </a>
  
    <nav class="md-nav" aria-label="Authentication Middlewares">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-auth" class="md-nav__link">
    Basic Auth
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirect-middleware" class="md-nav__link">
    Redirect Middleware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-metrics-for-monitoring" class="md-nav__link">
    Enable Metrics for Monitoring
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/felbinger/AdminGuide/edit/master/docs/services/traefik.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="traefik">Traefik<a class="headerlink" href="#traefik" title="Permanent link">&para;</a></h1>
<div class="admonition info">
<p>A reverse proxy is a router which binds to the ports <code>80</code> (http) and <code>443</code> (https).
You can access the configured services by connecting to the proxy (<code>https://domain.tld</code>) with a specific host header, which is going to be evaluated by the proxy.
But how do you connect to your proxy with this specific host header?
Due to the fact that you configured your dns to redirect all subdomains to your server you can simply access <code>https://phpmyadmin.domain.tld</code>.
You will reach the reverse proxy on port 443 with the host header <code>phpmyadmin.domain.tld</code>, after evaluation the proxy will redirect the incomming request to the configured service.</p>
</div>
<p>Add the following configuration to your <code>docker-compose.yml</code> in the main stack:
<div class="highlight"><pre><span></span><code>  <span class="nt">traefik</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">traefik:v2.4</span>
    <span class="nt">command</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--api.insecure=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--providers.docker=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--providers.docker.exposedbydefault=false&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--providers.docker.network=proxy&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--entrypoints.web.address=:80&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--entrypoints.web.http.redirections.entrypoint.to=websecure&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--entrypoints.web.http.redirections.entrypoint.scheme=https&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--entrypoints.websecure.address=:443&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--certificatesresolvers.myresolver.acme.tlschallenge=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--certificatesresolvers.myresolver.acme.email=admin@domain.de&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--certificatesresolvers.myresolver.acme.storage=/letsencrypt/acme.json&quot;</span>
      <span class="c1">#- &quot;--certificatesresolvers.myresolver.acme.caserver=https://acme-staging-v02.api.letsencrypt.org/directory&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--providers.file.filename=/configs/dynamic.yml&quot;</span>
      <span class="c1">#- &quot;--log.level=DEBUG&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--accesslog=true&quot;</span>
    <span class="nt">labels</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.enable=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.services.srv_traefik.loadbalancer.server.port=8080&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_traefik.rule=Host(`traefik.domain.de`)&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_traefik.entrypoints=websecure&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_traefik.tls=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_traefik.tls.certresolver=myresolver&quot;</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;80:80&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;443:443&quot;</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;/srv/main/traefik/letsencrypt:/letsencrypt&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;/srv/main/traefik/dynamic.yml:/configs/dynamic.yml&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;/etc/localtime:/etc/localtime:ro&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;/var/run/docker.sock:/var/run/docker.sock:ro&quot;</span>
    <span class="nt">networks</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">proxy</span>
</code></pre></div></p>
<p>Create the file <code>/srv/main/traefik/dynamic.yml</code> to require TLS version 1.2 or higher (currently only TLS 1.3):
<div class="highlight"><pre><span></span><code><span class="nt">tls</span><span class="p">:</span>
  <span class="nt">options</span><span class="p">:</span>
    <span class="nt">default</span><span class="p">:</span>
      <span class="nt">minVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">VersionTLS12</span>
      <span class="nt">sniStrict</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">cipherSuites</span><span class="p">:</span>
        <span class="c1"># TLS 1.3</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TLS_AES_256_GCM_SHA384</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TLS_CHACHA20_POLY1305_SHA256</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TLS_AES_128_GCM_SHA256</span>
        <span class="c1"># TLS 1.2</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305</span>
</code></pre></div></p>
<p>You also need a webserver for static content e.g. your <a href="https://github.com/felbinger/AdminGuide/tree/master/error_pages">error pages</a>: 
<div class="highlight"><pre><span></span><code>  <span class="nt">static</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx:stable-alpine</span>
    <span class="nt">restart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
    <span class="nt">labels</span><span class="p">:</span>
      <span class="c1"># BASIC CONFIGURATION</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.enable=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.services.srv_static.loadbalancer.server.port=80&quot;</span>

      <span class="c1"># ERROR PAGES</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.error40x.errors.status=403-404&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.error40x.errors.service=srv_static&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.error40x.errors.query=/error/{status}.html&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.error30x.errors.status=300-308&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.error30x.errors.service=srv_static&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.error30x.errors.query=/error/30x.html&quot;</span>

      <span class="c1"># HSTS</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_hsts.headers.frameDeny=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_hsts.headers.contentTypeNosniff=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_hsts.headers.browserXssFilter=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_hsts.headers.forceSTSHeader=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_hsts.headers.sslRedirect=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_hsts.headers.stsPreload=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_hsts.headers.stsSeconds=315360000&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_hsts.headers.stsIncludeSubdomains=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_hsts.headers.customRequestHeaders.X-Forwarded-Proto=https&quot;</span>

      <span class="c1"># DOMAIN ROOT CONTENT</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_static_root.rule=HostRegexp(`domain.de`,</span><span class="nv"> </span><span class="s">`{subdomain:[a-z0-9]+}.domain.de`)&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_static_root.entrypoints=websecure&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_static_root.tls=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_static_root.tls.certresolver=myresolver&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_static_root.priority=10&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_static_root.addprefix.prefix=/domain_root/&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_static_root.middlewares=mw_hsts@docker,mw_static_root@docker,error40x@docker,error30x@docker&quot;</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;/srv/main/static/webroot:/usr/share/nginx/html/&quot;</span>
    <span class="nt">networks</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">proxy</span>
</code></pre></div></p>
<p>You should also add your domain to the <a href="https://hstspreload.org/">HSTS Preload List</a>, all subdomains need to be reachable using a secure connection, so you need a wildcard certificate for this.</p>
<p>Let's do a <a href="https://www.ssllabs.com/ssltest">ssltest</a> to see how good we are:
<img alt="Picture of the ssltest result" loading="lazy" src="../../img/services/traefik_ssllabs_test.png?raw=true" /></p>
<h3 id="wildcard-certificates">Wildcard Certificates<a class="headerlink" href="#wildcard-certificates" title="Permanent link">&para;</a></h3>
<ol>
<li>Modify the command section of your traefik, to setup dnschallenge (remove <code>....tlschallenge=true</code>):
   <div class="highlight"><pre><span></span><code>      <span class="c1"># e.g. for cloudflare</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--certificatesresolvers.myresolver.acme.dnschallenge=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--certificatesresolvers.myresolver.acme.dnschallenge.provider=cloudflare&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;--certificatesresolvers.myresolver.acme.dnschallenge.resolvers=1.1.1.1:53,8.8.8.8:53&quot;</span>
</code></pre></div></li>
<li>Modify the environment section (<a href="https://doc.traefik.io/traefik/user-guides/docker-compose/acme-dns/#use-secrets">you can also use docker secrets</a>) of your traefik, to provide the required credentials for you dns api (checkout <a href="https://doc.traefik.io/traefik/https/acme/#providers">the list of providers</a>).</li>
<li>Configure the wildcard certificate for your services (e.g. the traefik dashboard in the labels section of the traefik service):
   <div class="highlight"><pre><span></span><code>      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_traefik.tls.domains[0].main=domain.de&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_traefik.tls.domains[0].sans=*.domain.de&quot;</span>
</code></pre></div></li>
</ol>
<h3 id="authentication-middlewares">Authentication Middlewares<a class="headerlink" href="#authentication-middlewares" title="Permanent link">&para;</a></h3>
<p>Traefik offers a lot of authentication middlewares (e.g. <a href="https://doc.traefik.io/traefik/middlewares/basicauth/">BasicAuth</a>, <a href="https://doc.traefik.io/traefik/middlewares/forwardauth/">ForwardAuth</a> (if you can provide a authentication service))</p>
<h4 id="basic-auth">Basic Auth<a class="headerlink" href="#basic-auth" title="Permanent link">&para;</a></h4>
<p>We are going to add a new router to our static service, which will provide files for download, behind an basic auth.
First we have to extend our traefik service, with the htpasswd file for the service. This can be done by simply adding the following volume:
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">volumes</span><span class="p">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- &quot;/srv/main/traefik/webfiles.htpasswd:/htpasswd/webfiles&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="nn">...</span>
</code></pre></div>
You can create the htpasswd file using the htpasswd utility from the apache2-utils package (at least on debian based operating systems).
<div class="highlight"><pre><span></span><code>apt install -y apache2-utils
htpasswd -c /srv/main/traefik/webfiles.htpasswd -c &lt;username&gt;
</code></pre></div></p>
<p>Now we can add the new router to our static service:
<div class="highlight"><pre><span></span><code>    <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="l l-Scalar l-Scalar-Plain">labels</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">...</span>
      <span class="l l-Scalar l-Scalar-Plain">- &quot;traefik.http.routers.r_static_files.rule=Host(`files.domain.de`)&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">- &quot;traefik.http.routers.r_static_files.entrypoints=websecure&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">- &quot;traefik.http.routers.r_static_files.tls=true&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">- &quot;traefik.http.routers.r_static_files.tls.certresolver=myresolver&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">- &quot;traefik.http.middlewares.mw_static_files.addprefix.prefix=/static_files/&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">- &quot;traefik.http.middlewares.mw_static_files_auth.basicauth.usersfile=/htpasswd/webfiles&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">- &quot;traefik.http.routers.r_static_files.middlewares=mw_static_files@docker,mw_static_files_auth@docker,error40x@docker,error30x@docker&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div></p>
<p>We also need to enable directory listing by creating the configuration for this uri:
<div class="highlight"><pre><span></span><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span><span class="p">;</span>

    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="kn">root</span>   <span class="s">/usr/share/nginx/html</span><span class="p">;</span>
        <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="s">/static_files</span> <span class="p">{</span>
        <span class="kn">root</span> <span class="s">/usr/share/nginx/html</span><span class="p">;</span>
        <span class="kn">autoindex</span> <span class="no">on</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Don't forget to add the created configuration to the volume section of the static service:
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">volumes</span><span class="p">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- &quot;/srv/main/static/nginx.conf:/etc/nginx/conf.d/default.conf&quot;</span>
<span class="nn">...</span>
</code></pre></div></p>
<h3 id="redirect-middleware">Redirect Middleware<a class="headerlink" href="#redirect-middleware" title="Permanent link">&para;</a></h3>
<p>You can also redirect a domain directly to another resource (e.g. your external webinterface of your mailserver):
<div class="highlight"><pre><span></span><code>      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_redirect.rule=Host(`domain.de`)&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_redirect.entrypoints=websecure&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_redirect.tls=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_redirect.tls.certresolver=myresolver&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_redirect.redirectregex.regex=https://domain.de&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_redirect.redirectregex.replacement=https://redirecteddomain.de&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.middlewares.mw_redirect.redirectregex.permanent=true&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;traefik.http.routers.r_redirect.middlewares=mw_redirect@docker,error40x@docker,error30x@docker&quot;</span>
</code></pre></div></p>
<h3 id="enable-metrics-for-monitoring">Enable Metrics for Monitoring<a class="headerlink" href="#enable-metrics-for-monitoring" title="Permanent link">&para;</a></h3>
<p>You can enable the prometheus metrics for monitoring (checkout <a href="../prometheus/">prometheus</a>) by adding the following to your command:
<div class="highlight"><pre><span></span><code>      <span class="p p-Indicator">-</span> <span class="s">&quot;--metrics.prometheus=true&quot;</span>
</code></pre></div></p>
<p>Don't forget to add your traefik container to the prometheus configuration:
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
<span class="nt">scrape_configs</span><span class="p">:</span>
   <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- job_name</span><span class="p p-Indicator">:</span> <span class="s">&#39;traefik&#39;</span>
    <span class="nt">static_configs</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">targets</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;traefik:8080&#39;</span><span class="p p-Indicator">]</span>
</code></pre></div></p>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 15, 2021</span>
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../installation/postinstall/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Postinstall Script
              </div>
            </div>
          </a>
        
        
          <a href="../nginx-proxy/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                nginx/proxy
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['search.suggest', 'search.highlight', 'navigation.expand', 'navigation.instant', 'navigation.sections'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../js/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.1.2/es5/tex-mml-chtml.js"></script>
      
        <script src="../../js/asciinema-player.js"></script>
      
    
  </body>
</html>